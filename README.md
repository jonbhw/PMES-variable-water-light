# 综合实验：按键控制流水灯速度

此项目系《微机原理与嵌入式系统实验》的综合实验项目。



## 需求分析

实现一串流水灯，用户可通过按键增/减其流水变化的速度。用户可通过 LCD 显示屏监视当前流水速度的大小。

本项目共用到了 3 个模块，包括：GPIO、EXTI 和 LCD。



### 创新点

相比其它流水灯实现，本项目可以



## 迭代

本项目经历了多次迭代。

第一版作为可行性验证版本，并未使用 EXTI 中断，而是轮询按键按下状态并对速度进行增减。这一版本实现了按键调整流水灯速度和 LCD 提示等功能。但由于轮询结构的限制，需要长按按钮等待下一个轮询周期开始才可成功侦测到按键被按下。

最终版加入了 EXTI 中断。用户可在任意时间短按按钮，触发相应中断，实现流水灯速度的增减。此版本功能较为完善，各模块划分比较清晰。



## 功能模块划分

### 主流程

主流程由一个初始化函数



## 设计流程图



## 核心代码



## 总结



## 附录

- [效果视频](https://f000.b2.jonbgua.com/file/jonbgua-video/PMES-variable-water-light/20210627_164844.mp4) | [备用地址](https://jonbgua-video.s3.us-west-000.backblazeb2.com/PMES-variable-water-light/20210627_164844.mp4)

